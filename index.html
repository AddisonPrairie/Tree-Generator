<html>
    <head>
        <title>WASM | Tree Generator</title>
        <link rel="stylesheet" href="style/style.css">
    </head>
    <body>   
        <div class="panel-holder">
        <div class="panel">
            <div class="panel-section">
                <h3>Simulation Controls</h3>
                <div class="input-group">
                    <button id="step">start</button>
                </div>
                <div class="input-group">
                    <label>mode</label>
                    <button>continuous</button>
                </div>
            </div>
            <div class="panel-section">
                <h3>Camera Controls</h3>
                <div class="input-group">
                    <label>distance</label>
                    <input type="number" value="0">
                </div>
            </div>
            <div class="panel-section">
                <h3>Stats</h3>
                <div class="input-group">
                    <label>nodes</label>
                </div>
                <div class="input-group">
                    <div class="stats-panel"></div>
                </div>
                <div class="input-group">
                    <label>time (ms)</label>
                </div>
                <div class="input-group">
                    <div class="stats-panel"></div>
                </div>
            </div>
            <div class="panel-section">
                <h3>Tree Settings</h3>
                <div class="input-group">
                    <label>shadow_x</label>
                    <input type="number" value="100" min="50" max="600" step="10">
                </div>
                <div class="input-group">
                    <label>shadow_y</label>
                    <input type="number" value="100" min="50" max="600" step="10">
                </div>
                <div class="input-group">
                    <label>shadow_z</label>
                    <input type="number" value="100" min="50" max="600" step="10">
                </div>
                <div class="input-group">
                    <label>shadow_a</label>
                    <input type="number" value="1.0" min=".01" max="10" step=".001">
                </div>
                <div class="input-group">
                    <label>shadow_b</label>
                    <input type="number" value="1.4" min="1.0" max="4." step=".001">
                </div>
                <div class="input-group">
                    <label>shadow_q</label>
                    <input type="number" value="12" min="1" max="48" step="1">
                </div>
                <div class="input-group">
                    <label>seed</label>
                    <input type="text" value="0xfa19b2e3a">
                </div>
                <div class="input-group">
                    <button>reset tree</button>
                </div>
            </div>
            <div class="panel-section">
                <h3>Simulation Settings</h3>
                <div class="input-group">
                    <label>tropism η</label>
                    <input type="number" value="0.0" min="-10." max="10." step=".001">
                </div>
                <div class="input-group">
                    <label>light η</label>
                    <input type="number" value="1.0" min="0.0" max="10." step=".001">
                </div>
                <div class="input-group">
                    <label>tree η</label>
                    <input type="number" value="10.0" min="1.0" max="10." step=".001">
                </div>
                <div class="input-group">
                    <label>energy α</label>
                    <input type="number" value="2.0" min=".5" max="10." step=".001">
                </div>
                <div class="input-group">
                    <label>energy λ</label>
                    <input type="number" value=".54" min="0.0" max="10." step=".001">
                </div>
                <div class="input-group">
                    <label>prune ratio</label>
                    <input type="number" value=".45" min="0.0" max="2." step=".001">
                </div>
                <div class="input-group">
                    <label>branch θ</label>
                    <input type="number" value="1.0" min="-4.0" max="4.0" step=".001">
                </div>
            </div>
        </div>
        </div> 
        <canvas id="canvas" style="width: 100%; height: 100%;"></canvas>
        <script src="js/glMatrix/gl-matrix-min.js"></script>
        <script src="js/render/renderer.js" type="module"></script>
        <script src="js/render/orbit.js" type="module"></script>
        <script src="js/main.js" type="module"></script>
        <script type="module">
            import { initApp } from "./js/main.js";

            window.initApp = initApp;
        </script>
        <script>
            let bLoaded = false;

            var Module = {
                onRuntimeInitialized: function() {
                    console.log("WASM module loaded");
                    bLoaded = true;
                }
            };

            document.addEventListener("DOMContentLoaded", function() {
                function checkInit() {
                    if (bLoaded) {
                        window.initApp(Module);
                    } else {
                        setTimeout(checkInit, 10);
                    }
                }

                checkInit();
            });
        </script>
        <script src="wasm.js"></script>
    </body>
</html>